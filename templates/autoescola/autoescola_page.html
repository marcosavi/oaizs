{% extends "base.html" %}
{% load static %}

{% block title %}
{{autoescola.nome}}
{% endblock %}

{% block additional_style %}
<style>
    main, footer {
        background-color: #FBFBFB !important;
    }
</style>
{% endblock %}

{% block content %}
{% if user_is_moderador %}
    {% if request.user.autoescola == autoescola %}
    <style>
      .container {
        display: none;
      }
    </style>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('toggleButton').addEventListener('click', function() {
          var containers = document.querySelectorAll('.container');
          containers.forEach(function(container) {
              if (container.style.display === 'none') {
                  container.style.display = 'block';
              } else {
                  container.style.display = 'none';
              }
          });
      });
      });
    </script>
    <div class="container-sm margin-moderador">
      <div class="text-center gray">
        <div class="row">
          <div class="col video-instrucao">
            <iframe class="video" src="https://www.youtube.com/embed/msizPweg3kE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope;"  allowfullscreen></iframe>
          </div>
          <div class="col height-index-inicial-sections">
            <ul class="list-group list-group-flush">
                <h3 class="h3-home">ðŸš˜ Bem-vindo, {{user.first_name}}</h3>
                <li class="list-group-item"><i class="bi bi-camera-reels-fill"></i> +300 vÃ­deos curtos selecionados para vocÃª</li>
                <li class="list-group-item"><i class="bi bi-file-earmark-play-fill"></i> +1500 questÃµes comentadas com vÃ­deos</li>
                <li class="list-group-item"><i class="bi bi-car-front-fill"></i> BÃ´nus sobre baliza e prÃ¡tica para vocÃª arrasar</li>
              </ul>
            <button type="button" class="btn btn-sm btn-whatsapp big"><i class="bi bi-whatsapp"></i>ajuda? fale conosco</button>
          </div>
        </div>
    </div>
    
      <p class="p-see-alunos">
        Progresso dos  alunos
      </p>

      {% if messages %}
        <div class="alert alert-warning alert-dismissible fade show" role="alert">
          {% for message in messages %}
              <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
          {% endfor %}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        </ul>
      {% endif %}

      <div class="tablewrapper">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th scope="col">e-mail</th>
              <th scope="col">Dada de criaÃ§ao</th>
              <th scope="col">Ãšltimo acesso</th>
              <th scope="col">Progresso</th>
              <th scope="col">Deletar</th>
            </tr>
          </thead>
          <tbody>
            {% for user in users %}
              <tr>
                <td>{{ user.email }}</td>
                <td>{{ user.date_joined|date:"d/m/Y - H:i:s" }}</td>
                <td>
                  {% if user.last_login %}
                    {{ user.last_login|date:"d/m/Y - H:i:s" }}
                  {% else %}
                    ðŸ’” Nunca entrou
                  {% endif %}
                </td>
                <td>
                  {% if user.login_streak == 1 %}
                    ðŸŽ‰ Estudou hoje
                  {% elif  user.login_streak >= 2 %}
                    ðŸ”¥ Estudnado a {{ user.login_streak }} dias seguidos
                  {% else %}
                    ðŸ˜” Nao estudou hoje
                  {% endif %}
                </td>
                <td>
                  <form action="{% url 'autoescola:autoescola_page' slug=autoescola.slug %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="delete_user_id" value="{{ user.id }}">
                    <button type="submit" class="btn btn-danger" onclick="return confirm('Tem certeza que deseja excluir este usuÃ¡rio?');">Deletar</button>
                </form>
                </td>
              </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>

      <div>
        <div>
          <p id="add-aluno" class="p-see-alunos">
            Adicionar aluno {{ autoescola.nome }}
          </p>
        </div>
  
        <form action="" method="post">
          {% csrf_token %}
          <div class="form-row align-form-center left-mobile-form">
            <div class="col-sm-3 my-1">
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text">CPF</div>
                </div>
                {{ form.cpf }}
              </div>
            </div>
            <div class="col-sm-3 my-1">
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text">E-mail</div>
                </div>
                {{ form.email }}
              </div>
            </div>
            <div class="col-auto my-1">
              <input type="submit" class="btn btn-primary" value="Adicionar aluno"></button>
            </div>
          </div>
        </form>
      </div>
  
      <div class="alert alert-warning alert-dismissible fade show" role="alert">
        <p class="senha-alert">Senha do aluno sao os <b>3 primeiros digitos do email</b> com os <b>6 primeiros digitos do CPF</b></p>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>

      <div class="alert  alert-success alert-dismissible fade show" role="alert">
        <p class="senha-alert">Link de acesso do aluno Ã© <b><a href="autoescola:login">www.acelere.org/autoescola/acessar/</b></p>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
      
    </div>
    {% endif %}
{% endif %}

<div class="container text-center first-section-inicial">
    <div class="row">
      <div class="col">
        <h1 class="h1-autoescola-page">{{ autoescola.titulo }}</h1>
        <p class="p-first">{{ autoescola.sub_titulo }}</p>
        <a href="https://wa.me//55{{autoescola.whatsapp}}"></a><button type="button" class="btn btn-sm btn-whatsapp big"><i class="bi bi-whatsapp"></i>Saiba Mais</button></a>
      </div>
      <div class="col">
        <img class="image-header" src="{{ autoescola.image_1|safe }}">
      </div>
    </div>
</div>

<div class="container text-center beneficios-quick">
  <div class="row align-items-start">
    <div class="col beneficio-quick">
      <i class="bi bi-geo-alt-fill"></i>{{ autoescola.endereco_formated }}
    </div>
    <div class="col beneficio-quick">
      <i class="bi bi-instagram"></i>{{ autoescola.instagram }}
    </div>
    <div class="col beneficio-quick">
      <i class="bi bi-facebook"></i>{{ autoescola.facebook }}
    </div>
  </div>
</div>

<div class="container text-center beneficios">
  <div class="row row-cols-1 row-cols-md-3 g-4 margin-benefits">
    <div class="col">
      <div class="card h-100">
        <img src="{{ autoescola.image_2|safe }}" class="card-img-top" alt="...">
        <div class="card-body">
          <p class="p-first">{{ autoescola.beneficio_1|safe }}</p>
        </div>
        <div class="card-footer">
          <!-- <small class="text-body-secondary">Fundada em </small> -->
        </div>
      </div>
    </div>
    <div class="col beneficio-central">
      <div class="card h-100">
        <img src="{{ autoescola.image_3|safe }}" class="card-img-top" alt="...">
        <div class="card-body">
          <p class="p-first">{{ autoescola.beneficio_2|safe }}</p>
        </div>
        <div class="card-footer">
          <!-- <small class="text-body-secondary">Fundada em </small> -->
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card h-100">
        <img src="{{ autoescola.image_4|safe }}" class="card-img-top" alt="...">
        <div class="card-body">
          <p class="p-first">{{ autoescola.beneficio_3|safe }}</p>
        </div>
        <div class="card-footer">
          <!-- <small class="text-body-secondary">Fundada em </small> -->
        </div>
      </div>
    </div>
  </div>
</div>


<div class="container text-center faq">
  <h1 class="h1-sec-autoescola-bottom">LocalizaÃ§ao</h1>
  {{ autoescola.endereco_iframe|safe }}
</div>


<div class="container text-center faq">
  <h1 class="h1-sec-autoescola-bottom">Perguntas Frequentes <span class="badge text-bg-secondary">F.A.Q</span></h1>
  <div class="accordion" id="accordionExample">

    <!-- Pergunta #1 -->
    <div class="accordion-item">
      <h2 class="accordion-header">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          Quais cursos de habilitaÃ§Ã£o vocÃªs oferecem?
        </button>
      </h2>
      <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
        <div class="accordion-body">
          {{ autoescola.pergunta_frequente_1 }}
        </div>
      </div>
    </div>

    <!-- Pergunta #2 -->
    <div class="accordion-item">
      <h2 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
          Como faÃ§o para me inscrever?
        </button>
      </h2>
      <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
        <div class="accordion-body">
          {{ autoescola.pergunta_frequente_2 }}
        </div>
      </div>
    </div>

    <!-- Pergunta #3 -->
    <div class="accordion-item">
      <h2 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
          Quais mÃ©todos de pagamento sÃ£o aceitos?
        </button>
      </h2>
      <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
        <div class="accordion-body">
          {{ autoescola.pergunta_frequente_3 }}
        </div>
      </div>
    </div>

  </div>
</div>




{% endblock %}